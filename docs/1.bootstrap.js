(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(3);(new(function(){function t(){this.canvas=document.getElementById("screen"),this.canvas.setAttribute("width",""+t.CANVAS_WIDTH),this.canvas.setAttribute("height",""+t.CANVAS_HEIGHT),(window.devicePixelRatio?window.devicePixelRatio:1)>1&&window.screen.width<t.CANVAS_WIDTH&&(this.canvas.style.width="320px",this.canvas.style.height="240px"),this.canvas_context=this.canvas.getContext("2d"),this.canvas_image_data=this.canvas_context.createImageData(t.CANVAS_WIDTH,t.CANVAS_HEIGHT),this.screen=new r.Screen(t.CANVAS_WIDTH,t.CANVAS_HEIGHT),this.image_data=new Uint8Array(i.memory.buffer,this.screen.get_canvas_bitmap_ptr(),t.CANVAS_WIDTH*t.CANVAS_HEIGHT*t.RGBA)}return t.prototype.loop=function(){var t=this;this.screen.update(),this.screen.draw(),this.canvas_image_data.data.set(this.image_data),this.canvas_context.putImageData(this.canvas_image_data,0,0),this.anime_id=requestAnimationFrame(function(){return t.loop})},t.CANVAS_WIDTH=768,t.CANVAS_HEIGHT=576,t.RGBA=4,t}())).loop()},function(t,e,n){"use strict";n.r(e),n.d(e,"Screen",function(){return p}),n.d(e,"__wbg_new_59cb74e423758ede",function(){return g}),n.d(e,"__wbg_stack_558ba5917b466edd",function(){return A}),n.d(e,"__wbg_error_4bb6c2a97407129a",function(){return m}),n.d(e,"__wbindgen_object_drop_ref",function(){return v}),n.d(e,"__wbindgen_throw",function(){return y});var r=n(3);const i=new Array(32);i.fill(void 0),i.push(void 0,null,!0,!1);let c=i.length;function o(t){return i[t]}let a,s=0,_=new TextEncoder("utf-8"),u=null;function f(){return null!==u&&u.buffer===r.memory.buffer||(u=new Uint8Array(r.memory.buffer)),u}a="function"==typeof _.encodeInto?function(t){let e=t.length,n=r.__wbindgen_malloc(e),i=0;{const e=f();for(;i<t.length;i++){const r=t.charCodeAt(i);if(r>127)break;e[n+i]=r}}if(i!==t.length){t=t.slice(i),n=r.__wbindgen_realloc(n,e,e=i+3*t.length);const c=f().subarray(n+i,n+e);i+=_.encodeInto(t,c).written}return s=i,n}:function(t){let e=t.length,n=r.__wbindgen_malloc(e),i=0;{const e=f();for(;i<t.length;i++){const r=t.charCodeAt(i);if(r>127)break;e[n+i]=r}}if(i!==t.length){const c=_.encode(t.slice(i));n=r.__wbindgen_realloc(n,e,e=i+c.length),f().set(c,n+i),i+=c.length}return s=i,n};let d=null;function l(){return null!==d&&d.buffer===r.memory.buffer||(d=new Int32Array(r.memory.buffer)),d}let h=new TextDecoder("utf-8");function w(t,e){return h.decode(f().subarray(t,t+e))}function b(t){const e=o(t);return function(t){t<36||(i[t]=c,c=t)}(t),e}class p{static __wrap(t){const e=Object.create(p.prototype);return e.ptr=t,e}free(){const t=this.ptr;this.ptr=0,r.__wbg_screen_free(t)}constructor(t,e){const n=r.screen_new(t,e);return p.__wrap(n)}get_canvas_bitmap_ptr(){return r.screen_get_canvas_bitmap_ptr(this.ptr)}update(){r.screen_update(this.ptr)}draw(){r.screen_draw(this.ptr)}}const g=function(){return function(t){c===i.length&&i.push(i.length+1);const e=c;return c=i[e],i[e]=t,e}(new Error)},A=function(t,e){const n=o(e).stack,r=a(n),i=s;l()[t/4+0]=r,l()[t/4+1]=i},m=function(t,e){const n=w(t,e).slice();r.__wbindgen_free(t,1*e),console.error(n)},v=function(t){b(t)},y=function(t,e){throw new Error(w(t,e))}},function(t,e,n){"use strict";var r=n.w[t.i];for(var i in n.r(e),r)"__webpack_init__"!=i&&(e[i]=r[i]);n(2);r.__webpack_init__()}]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi4vcGtnL3dhc21fY2FudmFzX2JpdGJsdC5qcyJdLCJuYW1lcyI6WyJ3YXNtX2NhbnZhc19iaXRibHRfMSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJ3YXNtX2NhbnZhc19iaXRibHRfYmdfMSIsIkJpdGJsdCIsInRoaXMiLCJjYW52YXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2V0QXR0cmlidXRlIiwiQ0FOVkFTX1dJRFRIIiwiQ0FOVkFTX0hFSUdIVCIsIndpbmRvdyIsImRldmljZVBpeGVsUmF0aW8iLCJzY3JlZW4iLCJ3aWR0aCIsInN0eWxlIiwiaGVpZ2h0IiwiY2FudmFzX2NvbnRleHQiLCJnZXRDb250ZXh0IiwiY2FudmFzX2ltYWdlX2RhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJTY3JlZW4iLCJpbWFnZV9kYXRhIiwiVWludDhBcnJheSIsIm1lbW9yeSIsImJ1ZmZlciIsImdldF9jYW52YXNfYml0bWFwX3B0ciIsIlJHQkEiLCJwcm90b3R5cGUiLCJsb29wIiwiX3RoaXMiLCJ1cGRhdGUiLCJkcmF3IiwiZGF0YSIsInNldCIsInB1dEltYWdlRGF0YSIsImFuaW1lX2lkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiciIsIl9fd2VicGFja19leHBvcnRzX18iLCJkIiwiX193YmdfbmV3XzU5Y2I3NGU0MjM3NThlZGUiLCJfX3diZ19zdGFja181NThiYTU5MTdiNDY2ZWRkIiwiX193YmdfZXJyb3JfNGJiNmMyYTk3NDA3MTI5YSIsIl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmIiwiX193YmluZGdlbl90aHJvdyIsIl93YXNtX2NhbnZhc19iaXRibHRfYmdfd2FzbV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiaGVhcCIsIkFycmF5IiwiZmlsbCIsInVuZGVmaW5lZCIsInB1c2giLCJoZWFwX25leHQiLCJsZW5ndGgiLCJnZXRPYmplY3QiLCJpZHgiLCJwYXNzU3RyaW5nVG9XYXNtIiwiV0FTTV9WRUNUT1JfTEVOIiwiY2FjaGVkVGV4dEVuY29kZXIiLCJUZXh0RW5jb2RlciIsImNhY2hlZ2V0VWludDhNZW1vcnkiLCJnZXRVaW50OE1lbW9yeSIsImVuY29kZUludG8iLCJhcmciLCJzaXplIiwicHRyIiwib2Zmc2V0IiwibWVtIiwiY29kZSIsImNoYXJDb2RlQXQiLCJzbGljZSIsInZpZXciLCJzdWJhcnJheSIsIndyaXR0ZW4iLCJidWYiLCJlbmNvZGUiLCJjYWNoZWdldEludDMyTWVtb3J5IiwiZ2V0SW50MzJNZW1vcnkiLCJJbnQzMkFycmF5IiwiY2FjaGVkVGV4dERlY29kZXIiLCJUZXh0RGVjb2RlciIsImdldFN0cmluZ0Zyb21XYXNtIiwibGVuIiwiZGVjb2RlIiwidGFrZU9iamVjdCIsInJldCIsImRyb3BPYmplY3QiLCJbb2JqZWN0IE9iamVjdF0iLCJvYmoiLCJPYmplY3QiLCJjcmVhdGUiLCJfX3dyYXAiLCJhZGRIZWFwT2JqZWN0IiwiRXJyb3IiLCJhcmcwIiwiYXJnMSIsInN0YWNrIiwicmV0MCIsInJldDEiLCJ2MCIsImNvbnNvbGUiLCJlcnJvciJdLCJtYXBwaW5ncyI6IndJQUFBLElBQUFBLEVBQUFDLEVBQUEsR0FDQUMsRUFBQUQsRUFBQSxJQXdEQSxJQW5EQSxXQWdCSSxTQUFBRSxJQUNJQyxLQUFLQyxPQUE0QkMsU0FBU0MsZUFBZSxVQUN6REgsS0FBS0MsT0FBT0csYUFBYSxRQUFTLEdBQUdMLEVBQU9NLGNBQzVDTCxLQUFLQyxPQUFPRyxhQUFhLFNBQVUsR0FBR0wsRUFBT08sZ0JBQzVCQyxPQUFPQyxpQkFBbUJELE9BQU9DLGlCQUFtQixHQUNyRCxHQUFLRCxPQUFPRSxPQUFPQyxNQUFRWCxFQUFPTSxlQUM5Q0wsS0FBS0MsT0FBT1UsTUFBTUQsTUFBUSxRQUMxQlYsS0FBS0MsT0FBT1UsTUFBTUMsT0FBUyxTQUUvQlosS0FBS2EsZUFBaUJiLEtBQUtDLE9BQU9hLFdBQVcsTUFDN0NkLEtBQUtlLGtCQUFvQmYsS0FBS2EsZUFB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LElBQUFDLFFBSU9uRCxFQUFBLFNBQUFvRCxFQUFBQyxHQUNQLE1BQUFWLEVBQUEvQixFQUFBeUMsR0FBQUMsTUFDQUMsRUFBQXpDLEVBQUE2QixHQUNBYSxFQUFBekMsRUFDQW9CLElBQUFpQixFQUFBLEtBQUFHLEVBQ0FwQixJQUFBaUIsRUFBQSxLQUFBSSxHQUdPdkQsRUFBQSxTQUFBbUQsRUFBQUMsR0FDUCxNQUFBSSxFQUFBbEIsRUFBQWEsRUFBQUMsR0FBQXpCLFFBQ0l4QixFQUFBLGdCQUFvQmdELEVBQUEsRUFBQUMsR0FDeEJLLFFBQUFDLE1BQUFGLElBR092RCxFQUFBLFNBQUFrRCxHQUNQVixFQUFBVSxJQUdPakQsRUFBQSxTQUFBaUQsRUFBQUMsR0FDUCxVQUFBRixNQUFBWixFQUFBYSxFQUFBQyIsImZpbGUiOiIxLmJvb3RzdHJhcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjcmVlbiB9IGZyb20gXCJ3YXNtLWNhbnZhcy1iaXRibHRcIjtcbmltcG9ydCB7IG1lbW9yeSB9IGZyb20gXCJ3YXNtLWNhbnZhcy1iaXRibHQvd2FzbV9jYW52YXNfYml0Ymx0X2JnXCI7XG5cbi8qKlxuICogQml0Ymx0Q2FudmFzXG4gKi9cbmNsYXNzIEJpdGJsdCB7XG4gICAgc3RhdGljIHJlYWRvbmx5IENBTlZBU19XSURUSCA9IDc2ODtcbiAgICBzdGF0aWMgcmVhZG9ubHkgQ0FOVkFTX0hFSUdIVCA9IDU3NjtcbiAgICBzdGF0aWMgcmVhZG9ubHkgUkdCQSA9IDQ7XG5cbiAgICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjYW52YXNfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICAgIHByaXZhdGUgY2FudmFzX2ltYWdlX2RhdGE6IEltYWdlRGF0YTtcbiAgICBwcml2YXRlIHNjcmVlbjogU2NyZWVuO1xuICAgIHByaXZhdGUgaW1hZ2VfZGF0YTogVWludDhBcnJheTtcblxuICAgIHByaXZhdGUgYW5pbWVfaWQ6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW4nKTtcbiAgICAgICAgdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGAke0JpdGJsdC5DQU5WQVNfV0lEVEh9YCk7XG4gICAgICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgYCR7Qml0Ymx0LkNBTlZBU19IRUlHSFR9YCk7XG4gICAgICAgIGxldCBwaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gPyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA6IDE7XG4gICAgICAgIGlmKHBpeGVsUmF0aW8gPiAxICYmIHdpbmRvdy5zY3JlZW4ud2lkdGggPCBCaXRibHQuQ0FOVkFTX1dJRFRIKSB7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IDMyMCArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IDI0MCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbnZhc19jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgdGhpcy5jYW52YXNfaW1hZ2VfZGF0YSA9IHRoaXMuY2FudmFzX2NvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKFxuICAgICAgICAgICAgQml0Ymx0LkNBTlZBU19XSURUSCwgQml0Ymx0LkNBTlZBU19IRUlHSFQpO1xuXG4gICAgICAgIHRoaXMuc2NyZWVuID0gbmV3IFNjcmVlbihCaXRibHQuQ0FOVkFTX1dJRFRILCBCaXRibHQuQ0FOVkFTX0hFSUdIVCk7XG4gICAgICAgIHRoaXMuaW1hZ2VfZGF0YSA9IG5ldyBVaW50OEFycmF5KFxuICAgICAgICAgICAgbWVtb3J5LmJ1ZmZlcixcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuLmdldF9jYW52YXNfYml0bWFwX3B0cigpLFxuICAgICAgICAgICAgQml0Ymx0LkNBTlZBU19XSURUSCAqIEJpdGJsdC5DQU5WQVNfSEVJR0hUICogQml0Ymx0LlJHQkEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxvb3BcbiAgICAgKi9cbiAgICBwdWJsaWMgbG9vcCgpIHtcbiAgICAgICAgLy8gdXBkYXRlXG4gICAgICAgIHRoaXMuc2NyZWVuLnVwZGF0ZSgpO1xuICAgICAgICAvLyBkcmF3XG4gICAgICAgIHRoaXMuc2NyZWVuLmRyYXcoKTtcbiAgICAgICAgdGhpcy5jYW52YXNfaW1hZ2VfZGF0YS5kYXRhLnNldCh0aGlzLmltYWdlX2RhdGEpO1xuICAgICAgICB0aGlzLmNhbnZhc19jb250ZXh0LnB1dEltYWdlRGF0YSh0aGlzLmNhbnZhc19pbWFnZV9kYXRhLCAwLCAwKTtcbiAgICAgICAgLy8gbmV4dCB0aWNrXG4gICAgICAgIHRoaXMuYW5pbWVfaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKTtcbiAgICB9XG59XG5cbm5ldyBCaXRibHQoKS5sb29wKCk7XG4iLCJpbXBvcnQgKiBhcyB3YXNtIGZyb20gJy4vd2FzbV9jYW52YXNfYml0Ymx0X2JnLndhc20nO1xuXG5jb25zdCBoZWFwID0gbmV3IEFycmF5KDMyKTtcblxuaGVhcC5maWxsKHVuZGVmaW5lZCk7XG5cbmhlYXAucHVzaCh1bmRlZmluZWQsIG51bGwsIHRydWUsIGZhbHNlKTtcblxubGV0IGhlYXBfbmV4dCA9IGhlYXAubGVuZ3RoO1xuXG5mdW5jdGlvbiBhZGRIZWFwT2JqZWN0KG9iaikge1xuICAgIGlmIChoZWFwX25leHQgPT09IGhlYXAubGVuZ3RoKSBoZWFwLnB1c2goaGVhcC5sZW5ndGggKyAxKTtcbiAgICBjb25zdCBpZHggPSBoZWFwX25leHQ7XG4gICAgaGVhcF9uZXh0ID0gaGVhcFtpZHhdO1xuXG4gICAgaGVhcFtpZHhdID0gb2JqO1xuICAgIHJldHVybiBpZHg7XG59XG5cbmZ1bmN0aW9uIGdldE9iamVjdChpZHgpIHsgcmV0dXJuIGhlYXBbaWR4XTsgfVxuXG5sZXQgV0FTTV9WRUNUT1JfTEVOID0gMDtcblxubGV0IGNhY2hlZFRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCd1dGYtOCcpO1xuXG5sZXQgY2FjaGVnZXRVaW50OE1lbW9yeSA9IG51bGw7XG5mdW5jdGlvbiBnZXRVaW50OE1lbW9yeSgpIHtcbiAgICBpZiAoY2FjaGVnZXRVaW50OE1lbW9yeSA9PT0gbnVsbCB8fCBjYWNoZWdldFVpbnQ4TWVtb3J5LmJ1ZmZlciAhPT0gd2FzbS5tZW1vcnkuYnVmZmVyKSB7XG4gICAgICAgIGNhY2hlZ2V0VWludDhNZW1vcnkgPSBuZXcgVWludDhBcnJheSh3YXNtLm1lbW9yeS5idWZmZXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVnZXRVaW50OE1lbW9yeTtcbn1cblxubGV0IHBhc3NTdHJpbmdUb1dhc207XG5pZiAodHlwZW9mIGNhY2hlZFRleHRFbmNvZGVyLmVuY29kZUludG8gPT09ICdmdW5jdGlvbicpIHtcbiAgICBwYXNzU3RyaW5nVG9XYXNtID0gZnVuY3Rpb24oYXJnKSB7XG5cblxuICAgICAgICBsZXQgc2l6ZSA9IGFyZy5sZW5ndGg7XG4gICAgICAgIGxldCBwdHIgPSB3YXNtLl9fd2JpbmRnZW5fbWFsbG9jKHNpemUpO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbWVtID0gZ2V0VWludDhNZW1vcnkoKTtcbiAgICAgICAgICAgIGZvciAoOyBvZmZzZXQgPCBhcmcubGVuZ3RoOyBvZmZzZXQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBhcmcuY2hhckNvZGVBdChvZmZzZXQpO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlID4gMHg3RikgYnJlYWs7XG4gICAgICAgICAgICAgICAgbWVtW3B0ciArIG9mZnNldF0gPSBjb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9mZnNldCAhPT0gYXJnLmxlbmd0aCkge1xuICAgICAgICAgICAgYXJnID0gYXJnLnNsaWNlKG9mZnNldCk7XG4gICAgICAgICAgICBwdHIgPSB3YXNtLl9fd2JpbmRnZW5fcmVhbGxvYyhwdHIsIHNpemUsIHNpemUgPSBvZmZzZXQgKyBhcmcubGVuZ3RoICogMyk7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gZ2V0VWludDhNZW1vcnkoKS5zdWJhcnJheShwdHIgKyBvZmZzZXQsIHB0ciArIHNpemUpO1xuICAgICAgICAgICAgY29uc3QgcmV0ID0gY2FjaGVkVGV4dEVuY29kZXIuZW5jb2RlSW50byhhcmcsIHZpZXcpO1xuXG4gICAgICAgICAgICBvZmZzZXQgKz0gcmV0LndyaXR0ZW47XG4gICAgICAgIH1cbiAgICAgICAgV0FTTV9WRUNUT1JfTEVOID0gb2Zmc2V0O1xuICAgICAgICByZXR1cm4gcHRyO1xuICAgIH07XG59IGVsc2Uge1xuICAgIHBhc3NTdHJpbmdUb1dhc20gPSBmdW5jdGlvbihhcmcpIHtcblxuXG4gICAgICAgIGxldCBzaXplID0gYXJnLmxlbmd0aDtcbiAgICAgICAgbGV0IHB0ciA9IHdhc20uX193YmluZGdlbl9tYWxsb2Moc2l6ZSk7XG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBtZW0gPSBnZXRVaW50OE1lbW9yeSgpO1xuICAgICAgICAgICAgZm9yICg7IG9mZnNldCA8IGFyZy5sZW5ndGg7IG9mZnNldCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGFyZy5jaGFyQ29kZUF0KG9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgPiAweDdGKSBicmVhaztcbiAgICAgICAgICAgICAgICBtZW1bcHRyICsgb2Zmc2V0XSA9IGNvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob2Zmc2V0ICE9PSBhcmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBidWYgPSBjYWNoZWRUZXh0RW5jb2Rlci5lbmNvZGUoYXJnLnNsaWNlKG9mZnNldCkpO1xuICAgICAgICAgICAgcHRyID0gd2FzbS5fX3diaW5kZ2VuX3JlYWxsb2MocHRyLCBzaXplLCBzaXplID0gb2Zmc2V0ICsgYnVmLmxlbmd0aCk7XG4gICAgICAgICAgICBnZXRVaW50OE1lbW9yeSgpLnNldChidWYsIHB0ciArIG9mZnNldCk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gYnVmLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBXQVNNX1ZFQ1RPUl9MRU4gPSBvZmZzZXQ7XG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfTtcbn1cblxubGV0IGNhY2hlZ2V0SW50MzJNZW1vcnkgPSBudWxsO1xuZnVuY3Rpb24gZ2V0SW50MzJNZW1vcnkoKSB7XG4gICAgaWYgKGNhY2hlZ2V0SW50MzJNZW1vcnkgPT09IG51bGwgfHwgY2FjaGVnZXRJbnQzMk1lbW9yeS5idWZmZXIgIT09IHdhc20ubWVtb3J5LmJ1ZmZlcikge1xuICAgICAgICBjYWNoZWdldEludDMyTWVtb3J5ID0gbmV3IEludDMyQXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZ2V0SW50MzJNZW1vcnk7XG59XG5cbmxldCBjYWNoZWRUZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcblxuZnVuY3Rpb24gZ2V0U3RyaW5nRnJvbVdhc20ocHRyLCBsZW4pIHtcbiAgICByZXR1cm4gY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKGdldFVpbnQ4TWVtb3J5KCkuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW4pKTtcbn1cblxuZnVuY3Rpb24gZHJvcE9iamVjdChpZHgpIHtcbiAgICBpZiAoaWR4IDwgMzYpIHJldHVybjtcbiAgICBoZWFwW2lkeF0gPSBoZWFwX25leHQ7XG4gICAgaGVhcF9uZXh0ID0gaWR4O1xufVxuXG5mdW5jdGlvbiB0YWtlT2JqZWN0KGlkeCkge1xuICAgIGNvbnN0IHJldCA9IGdldE9iamVjdChpZHgpO1xuICAgIGRyb3BPYmplY3QoaWR4KTtcbiAgICByZXR1cm4gcmV0O1xufVxuLyoqXG4qL1xuZXhwb3J0IGNsYXNzIFNjcmVlbiB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKFNjcmVlbi5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5wdHI7XG4gICAgICAgIHRoaXMucHRyID0gMDtcblxuICAgICAgICB3YXNtLl9fd2JnX3NjcmVlbl9mcmVlKHB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAgKiBAcmV0dXJucyB7U2NyZWVufVxuICAgICovXG4gICAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLnNjcmVlbl9uZXcod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHJldHVybiBTY3JlZW4uX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGdldF9jYW52YXNfYml0bWFwX3B0cigpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gd2FzbS5zY3JlZW5fZ2V0X2NhbnZhc19iaXRtYXBfcHRyKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKi9cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHdhc20uc2NyZWVuX3VwZGF0ZSh0aGlzLnB0cik7XG4gICAgfVxuICAgIC8qKlxuICAgICovXG4gICAgZHJhdygpIHtcbiAgICAgICAgd2FzbS5zY3JlZW5fZHJhdyh0aGlzLnB0cik7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgX193YmdfbmV3XzU5Y2I3NGU0MjM3NThlZGUgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCByZXQgPSBuZXcgRXJyb3IoKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufTtcblxuZXhwb3J0IGNvbnN0IF9fd2JnX3N0YWNrXzU1OGJhNTkxN2I0NjZlZGQgPSBmdW5jdGlvbihhcmcwLCBhcmcxKSB7XG4gICAgY29uc3QgcmV0ID0gZ2V0T2JqZWN0KGFyZzEpLnN0YWNrO1xuICAgIGNvbnN0IHJldDAgPSBwYXNzU3RyaW5nVG9XYXNtKHJldCk7XG4gICAgY29uc3QgcmV0MSA9IFdBU01fVkVDVE9SX0xFTjtcbiAgICBnZXRJbnQzMk1lbW9yeSgpW2FyZzAgLyA0ICsgMF0gPSByZXQwO1xuICAgIGdldEludDMyTWVtb3J5KClbYXJnMCAvIDQgKyAxXSA9IHJldDE7XG59O1xuXG5leHBvcnQgY29uc3QgX193YmdfZXJyb3JfNGJiNmMyYTk3NDA3MTI5YSA9IGZ1bmN0aW9uKGFyZzAsIGFyZzEpIHtcbiAgICBjb25zdCB2MCA9IGdldFN0cmluZ0Zyb21XYXNtKGFyZzAsIGFyZzEpLnNsaWNlKCk7XG4gICAgd2FzbS5fX3diaW5kZ2VuX2ZyZWUoYXJnMCwgYXJnMSAqIDEpO1xuICAgIGNvbnNvbGUuZXJyb3IodjApO1xufTtcblxuZXhwb3J0IGNvbnN0IF9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmID0gZnVuY3Rpb24oYXJnMCkge1xuICAgIHRha2VPYmplY3QoYXJnMCk7XG59O1xuXG5leHBvcnQgY29uc3QgX193YmluZGdlbl90aHJvdyA9IGZ1bmN0aW9uKGFyZzAsIGFyZzEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0U3RyaW5nRnJvbVdhc20oYXJnMCwgYXJnMSkpO1xufTtcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==